import{y as ce,e as N,u as ue,o as fe,S as he,g as J,h as K,a as de,f as D,L as _e}from"../chunks/navigation.fb325608.js";import{s as $,f as v,a as ne,l as se,g,h as y,c as le,m as re,d,A as Q,j as p,B as V,i as E,x as I,C as pe,D as me,n as ve,y as S,E as ge,o as ie,e as P,F as be,G as ae}from"../chunks/scheduler.ca2b223c.js";import{S as B,i as G,a as b,g as T,t as k,c as x,b as z,d as M,m as A,e as L,f as ye,h as ke,j as W}from"../chunks/index.8c87149d.js";const we=({url:n})=>{let e="";return e=n.searchParams.get("q")??"",Promise.resolve({youtubeApi:ce,query:e})},Ke=Object.freeze(Object.defineProperty({__proto__:null,load:we},Symbol.toStringTag,{value:"Module"}));function Ie(n){return n()}function Ee(n){n.forEach(Ie)}const q=[],X=[],j=[],Y=[],oe=Promise.resolve();let U=!1;function Re(){U||(U=!0,oe.then(qe))}function Se(){return Re(),oe}function Ce(n){j.push(n)}const H=new Set;let O=0;function qe(){do{for(;O<q.length;){const n=q[O];O++,Oe(n.$$)}for(q.length=0,O=0;X.length;)X.pop()();for(let n=0;n<j.length;n+=1){const e=j[n];H.has(e)||(H.add(e),e())}j.length=0}while(q.length);for(;Y.length;)Y.pop()();U=!1,H.clear()}function Oe(n){if(n.fragment!==null){n.update(),Ee(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ce)}}const je={root:null,rootMargin:"0px",threshold:0,unobserveOnEnter:!1},R=(n,e)=>new CustomEvent(n,{detail:e});function De(n,e={}){const{root:r,rootMargin:t,threshold:a,unobserveOnEnter:l}=Object.assign(Object.assign({},je),e);let i={x:void 0,y:void 0},s={vertical:void 0,horizontal:void 0};if(typeof IntersectionObserver<"u"&&n){const o=new IntersectionObserver((u,f)=>{u.forEach(_=>{i.y>_.boundingClientRect.y?s.vertical="up":s.vertical="down",i.x>_.boundingClientRect.x?s.horizontal="left":s.horizontal="right",i={y:_.boundingClientRect.y,x:_.boundingClientRect.x};const c={inView:_.isIntersecting,entry:_,scrollDirection:s,node:n,observer:f};n.dispatchEvent(R("inview_change",c)),n.dispatchEvent(R("change",c)),_.isIntersecting?(n.dispatchEvent(R("inview_enter",c)),n.dispatchEvent(R("enter",c)),l&&f.unobserve(n)):(n.dispatchEvent(R("inview_leave",c)),n.dispatchEvent(R("leave",c)))})},{root:r,rootMargin:t,threshold:a});return Se().then(()=>{n.dispatchEvent(R("inview_init",{observer:o,node:n})),n.dispatchEvent(R("init",{observer:o,node:n}))}),o.observe(n),{destroy(){o.unobserve(n)}}}}function Ve(n){let e,r,t,a,l,i,s,o=n[1].title+"",u,f,_,c;return{c(){e=v("li"),r=v("a"),t=v("div"),a=v("img"),i=ne(),s=v("h3"),u=se(o),this.h()},l(h){e=g(h,"LI",{class:!0});var m=y(e);r=g(m,"A",{href:!0,class:!0});var w=y(r);t=g(w,"DIV",{class:!0});var C=y(t);a=g(C,"IMG",{src:!0,alt:!0,class:!0}),i=le(C),s=g(C,"H3",{class:!0});var F=y(s);u=re(F,o),F.forEach(d),C.forEach(d),w.forEach(d),m.forEach(d),this.h()},h(){Q(a.src,l=n[1].thumbnails.default.url)||p(a,"src",l),p(a,"alt","thumbnail"),p(a,"class","svelte-ti8bo6"),p(s,"class","svelte-ti8bo6"),p(t,"class","container svelte-ti8bo6"),p(r,"href",f="/playlist?id="+n[0]),p(r,"class","svelte-ti8bo6"),p(e,"class","search-result-item svelte-ti8bo6"),V(e,"visible",n[2])},m(h,m){E(h,e,m),I(e,r),I(r,t),I(t,a),I(t,i),I(t,s),I(s,u),_||(c=[pe(De.call(null,e)),me(e,"inview_enter",n[3])],_=!0)},p(h,[m]){m&2&&!Q(a.src,l=h[1].thumbnails.default.url)&&p(a,"src",l),m&2&&o!==(o=h[1].title+"")&&ve(u,o),m&1&&f!==(f="/playlist?id="+h[0])&&p(r,"href",f),m&4&&V(e,"visible",h[2])},i:S,o:S,d(h){h&&d(e),_=!1,ge(c)}}}function Pe(n,e,r){let t,{id:a}=e,{snippet:l}=e,{index:i}=e,s=!1,o=!1;function u(f){r(5,s=!0),console.log(s)}return ie(()=>{setTimeout(()=>{r(6,o=!0)},i*100+100)}),n.$$set=f=>{"id"in f&&r(0,a=f.id),"snippet"in f&&r(1,l=f.snippet),"index"in f&&r(4,i=f.index)},n.$$.update=()=>{n.$$.dirty&96&&r(2,t=s&&o)},[a,l,t,u,i,s,o]}class ze extends B{constructor(e){super(),G(this,e,Pe,Ve,$,{id:0,snippet:1,index:4})}}function Z(n,e,r){const t=n.slice();return t[1]=e[r].id,t[2]=e[r].snippet,t[4]=r,t}function ee(n){let e=[],r=new Map,t,a,l=N(n[0].items);const i=s=>s[1];for(let s=0;s<l.length;s+=1){let o=Z(n,l,s),u=i(o);r.set(u,e[s]=te(u,o))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=P()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);t=P()},m(s,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(s,o);E(s,t,o),a=!0},p(s,o){o&1&&(l=N(s[0].items),T(),e=ue(e,o,i,1,s,l,r,t.parentNode,fe,te,t,Z),x())},i(s){if(!a){for(let o=0;o<l.length;o+=1)b(e[o]);a=!0}},o(s){for(let o=0;o<e.length;o+=1)k(e[o]);a=!1},d(s){s&&d(t);for(let o=0;o<e.length;o+=1)e[o].d(s)}}}function te(n,e){let r,t,a;return t=new ze({props:{id:e[1].playlistId,snippet:e[2],index:e[4]}}),{key:n,first:null,c(){r=P(),z(t.$$.fragment),this.h()},l(l){r=P(),M(t.$$.fragment,l),this.h()},h(){this.first=r},m(l,i){E(l,r,i),A(t,l,i),a=!0},p(l,i){e=l;const s={};i&1&&(s.id=e[1].playlistId),i&1&&(s.snippet=e[2]),i&1&&(s.index=e[4]),t.$set(s)},i(l){a||(b(t.$$.fragment,l),a=!0)},o(l){k(t.$$.fragment,l),a=!1},d(l){l&&d(r),L(t,l)}}}function Me(n){var a;let e,r,t=((a=n[0])==null?void 0:a.items)&&ee(n);return{c(){e=v("ul"),t&&t.c(),this.h()},l(l){e=g(l,"UL",{class:!0});var i=y(e);t&&t.l(i),i.forEach(d),this.h()},h(){p(e,"class","svelte-n6gyho")},m(l,i){E(l,e,i),t&&t.m(e,null),r=!0},p(l,[i]){var s;(s=l[0])!=null&&s.items?t?(t.p(l,i),i&1&&b(t,1)):(t=ee(l),t.c(),b(t,1),t.m(e,null)):t&&(T(),k(t,1,1,()=>{t=null}),x())},i(l){r||(b(t),r=!0)},o(l){k(t),r=!1},d(l){l&&d(e),t&&t.d()}}}function Ae(n,e,r){let{searchResults:t}=e;return n.$$set=a=>{"searchResults"in a&&r(0,t=a.searchResults)},[t]}class Le extends B{constructor(e){super(),G(this,e,Ae,Me,$,{searchResults:0})}}function He(n){let e,r="Haga una bÃºsqueda o introduzca el ID de una playlist",t,a,l;return{c(){e=v("h1"),e.textContent=r,this.h()},l(i){e=g(i,"H1",{class:!0,"data-svelte-h":!0}),be(e)!=="svelte-thgj8"&&(e.textContent=r),this.h()},h(){p(e,"class","texto-ayuda svelte-1h94i4e")},m(i,s){E(i,e,s),l=!0},p:S,i(i){l||(i&&ae(()=>{l&&(a&&a.end(1),t=ye(e,D,{delay:200,duration:500}),t.start())}),l=!0)},o(i){t&&t.invalidate(),i&&(a=ke(e,D,{duration:100})),l=!1},d(i){i&&d(e),i&&a&&a.end()}}}function Ue(n){let e,r,t,a,l={ctx:n,current:null,token:null,hasCatch:!0,pending:Ge,then:Be,catch:$e,value:6,error:7,blocks:[,,,]};return K(r=n[2],l),{c(){e=v("div"),l.block.c(),this.h()},l(i){e=g(i,"DIV",{class:!0});var s=y(e);l.block.l(s),s.forEach(d),this.h()},h(){p(e,"class","results svelte-1h94i4e")},m(i,s){E(i,e,s),l.block.m(e,l.anchor=null),l.mount=()=>e,l.anchor=null,a=!0},p(i,s){n=i,l.ctx=n,s&4&&r!==(r=n[2])&&K(r,l)||de(l,n,s)},i(i){a||(b(l.block),i&&ae(()=>{a&&(t||(t=W(e,D,{},!0)),t.run(1))}),a=!0)},o(i){for(let s=0;s<3;s+=1){const o=l.blocks[s];k(o)}i&&(t||(t=W(e,D,{},!1)),t.run(0)),a=!1},d(i){i&&d(e),l.block.d(),l.token=null,l=null,i&&t&&t.end()}}}function $e(n){let e;return{c(){e=se("Se produjo un error")},l(r){e=re(r,"Se produjo un error")},m(r,t){E(r,e,t)},p:S,i:S,o:S,d(r){r&&d(e)}}}function Be(n){let e,r;return e=new Le({props:{searchResults:n[6]}}),{c(){z(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,a){A(e,t,a),r=!0},p(t,a){const l={};a&4&&(l.searchResults=t[6]),e.$set(l)},i(t){r||(b(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function Ge(n){let e,r,t;return r=new _e({props:{size:"1.5rem"}}),{c(){e=v("div"),z(r.$$.fragment),this.h()},l(a){e=g(a,"DIV",{class:!0});var l=y(e);M(r.$$.fragment,l),l.forEach(d),this.h()},h(){p(e,"class","loading-container svelte-1h94i4e")},m(a,l){E(a,e,l),A(r,e,null),t=!0},p:S,i(a){t||(b(r.$$.fragment,a),t=!0)},o(a){k(r.$$.fragment,a),t=!1},d(a){a&&d(e),L(r)}}}function Te(n){let e,r,t,a,l,i,s,o;a=new he({props:{query:decodeURIComponent(n[0].query)}}),a.$on("search",n[3]);const u=[Ue,He],f=[];function _(c,h){return c[2]?0:c[1]?1:-1}return~(i=_(n))&&(s=f[i]=u[i](n)),{c(){e=v("div"),r=v("div"),t=v("div"),z(a.$$.fragment),l=ne(),s&&s.c(),this.h()},l(c){e=g(c,"DIV",{class:!0});var h=y(e);r=g(h,"DIV",{class:!0});var m=y(r);t=g(m,"DIV",{class:!0});var w=y(t);M(a.$$.fragment,w),w.forEach(d),m.forEach(d),l=le(h),s&&s.l(h),h.forEach(d),this.h()},h(){p(t,"class","search svelte-1h94i4e"),p(r,"class","search-container svelte-1h94i4e"),V(r,"large",n[0].query===""),p(e,"class","main")},m(c,h){E(c,e,h),I(e,r),I(r,t),A(a,t,null),I(e,l),~i&&f[i].m(e,null),o=!0},p(c,[h]){const m={};h&1&&(m.query=decodeURIComponent(c[0].query)),a.$set(m),(!o||h&1)&&V(r,"large",c[0].query==="");let w=i;i=_(c),i===w?~i&&f[i].p(c,h):(s&&(T(),k(f[w],1,1,()=>{f[w]=null}),x()),~i?(s=f[i],s?s.p(c,h):(s=f[i]=u[i](c),s.c()),b(s,1),s.m(e,null)):s=null)},i(c){o||(b(a.$$.fragment,c),b(s),o=!0)},o(c){k(a.$$.fragment,c),k(s),o=!1},d(c){c&&d(e),L(a),~i&&f[i].d()}}}function xe(n,e,r){let t,{data:a}=e,l=null,i=!1;ie(()=>{r(1,i=!0)});async function s(u){var _,c;if(u===""){r(2,l=null);return}r(2,l=t.searchPlaylists(u));const f=await t.playlistInfo(u);((c=(_=f.items)==null?void 0:_.at(0))==null?void 0:c.id)!==void 0&&J(`/playlist?id=${f.items[0].id}`,{replaceState:!0})}async function o(u){J(`/?q=${u.detail.query}`)}return n.$$set=u=>{"data"in u&&r(0,a=u.data)},n.$$.update=()=>{n.$$.dirty&1&&(t=a.youtubeApi),n.$$.dirty&3&&i&&s(a.query)},[a,i,l,o]}class Qe extends B{constructor(e){super(),G(this,e,xe,Te,$,{data:0})}}export{Qe as component,Ke as universal};
