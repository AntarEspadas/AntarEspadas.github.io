import{a as A,m as U,b as x,e as O,p as B,r as c,w as R,f as F,h as e,i as S,j as I,o as $,k as D,l as o,q as p,s as L,u as N,t as j,F as M}from"./entry.638dfdac.js";import{g as q,V as h,a as G}from"./helpers.23a0596b.js";import{m as H,u as W,V as w,f as z,a as J,b as g,c as P,d as K,e as _,g as Q}from"./VSpacer.b3fd4ada.js";import{m as X,a as Y,b as Z,c as ee,u as ae,d as te,e as le,f as oe,g as se,V as re,h as C}from"./VLabel.1475aadc.js";import{u as ne}from"./ssrBoot.b02e0988.js";const ie=A()({name:"VSnackbar",props:{multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...X({location:"bottom"}),...Y(),...Z(),...ee(),...U(),...x(H({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},emits:{"update:modelValue":a=>!0},setup(a,f){let{slots:r}=f;const l=O(a,"modelValue"),{locationStyles:V}=ae(a),{positionClasses:m}=te(a),{scopeId:d}=W(),{themeClasses:v}=B(a),{colorClasses:y,colorStyles:b,variantClasses:i}=le(a),{roundedClasses:t}=oe(a),s=c();R(l,u),R(()=>a.timeout,u),F(()=>{l.value&&u()});let n=-1;function u(){window.clearTimeout(n);const k=Number(a.timeout);!l.value||k===-1||(n=window.setTimeout(()=>{l.value=!1},k))}function E(){window.clearTimeout(n)}return ne(()=>{const[k]=w.filterProps(a);return e(w,S({ref:s,class:["v-snackbar",{"v-snackbar--active":l.value,"v-snackbar--multi-line":a.multiLine&&!a.vertical,"v-snackbar--vertical":a.vertical},m.value,a.class],style:a.style},k,{modelValue:l.value,"onUpdate:modelValue":T=>l.value=T,contentProps:S({class:["v-snackbar__wrapper",v.value,y.value,t.value,i.value],style:[V.value,b.value],onPointerenter:E,onPointerleave:u},k.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},d),{default:()=>[se(!1,"v-snackbar"),r.default&&e("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[r.default()]),r.actions&&e(re,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[e("div",{class:"v-snackbar__actions"},[r.actions()])]})],activator:r.activator})}),z({},s)}});class ue{async editarRol(f,r,l){return fetch(`/api/admin/rol?email=${f}&rol=${r}`,{method:l,headers:await q()})}}const ce=new ue,ke=I({__name:"admin",setup(a){const f=[{title:"Usuario",value:"USUARIO"},{title:"Ver reportes",value:"REPORTES_READ"},{title:"Editar reportes",value:"REPORTES_WRITE"},{title:"Administrador",value:"ADMIN"}],r=c("USUARIO"),l=c(""),V=c(),m=c(!1),d=c(""),v=c("success"),y=[i=>!!i||"Campo requerido"];async function b(i){if(V.value===void 0)return;const{valid:t}=await V.value.validate();if(!t)return;const s=i==="PUT"?"agreg贸":"elimin贸";ce.editarRol(l.value,r.value,i).then(async n=>{if(n.ok)d.value=`El rol se ${s} correctamente`,v.value="success";else{const u=await n.json();console.error(u),v.value="error",d.value=u.message}m.value=!0}).catch(n=>{console.error(n),d.value=n.message,v.value="error",m.value=!0})}return(i,t)=>($(),D(M,null,[e(N(Q),{ref_key:"refForm",ref:V,onSubmit:t[4]||(t[4]=L(()=>{},["prevent"]))},{default:o(()=>[e(J,null,{default:o(()=>[e(g,null,{default:o(()=>[e(h,{type:"info"},{default:o(()=>[p("Para que los cambios tengan efecto, el usuario afectado debe cerrar sesi贸n y volverla a abrir")]),_:1})]),_:1}),e(g,null,{default:o(()=>[e(P,{cols:"12",sm:"6"},{default:o(()=>[e(K,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),rules:y,label:"Correo electr贸nico",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(P,{cols:"12",sm:"6"},{default:o(()=>[e(G,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=s=>r.value=s),items:f,label:"rol",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(g,null,{default:o(()=>[e(_),e(P,null,{default:o(()=>[e(C,{color:"error",variant:"tonal",onClick:t[2]||(t[2]=s=>b("DELETE"))},{default:o(()=>[p("Eliminar Rol")]),_:1})]),_:1}),e(_),e(P,null,{default:o(()=>[e(C,{color:"primary",onClick:t[3]||(t[3]=s=>b("PUT"))},{default:o(()=>[p("Agregar Rol")]),_:1})]),_:1}),e(_)]),_:1})]),_:1})]),_:1},512),e(ie,{modelValue:m.value,"onUpdate:modelValue":t[5]||(t[5]=s=>m.value=s),timeout:3e3,color:v.value},{default:o(()=>[p(j(d.value),1)]),_:1},8,["modelValue","color"])],64))}});export{ke as default};
